<html>
	<head>
	 	<title>ClickThis - Groups</title>
	    <meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	    <meta name="apple-mobile-web-app-capable" content="yes">
	    <meta name="apple-mobile-web-app-status-bar-style" content="black">
	    <link rel="stylesheet" href="css/jqtouch.css"/>
	    <link rel="stylesheet" href="css/theme.css"/>
	    <link rel="stylesheet" href="css/style.css"/>
	    <link rel="apple-touch-icon" href="img/ClickThis64.png" />
	</head>
	<body>
		<div id="page">
			<div id="home" class="current">
				<!-- Toolbar -->
            	<div class="toolbar">
                    <h1 id="toolbarTitle"><a href="http://illution.dk/ClickThisPrototype/home.html" title="Home" style="text-decoration:none; color:#FFF;">ClickThis</a></h1>
                    <a class="back" id="backButton" data-href="home.html" data-app-onClick="ClickThisApp.terminateApp()" data-app-text="Quit" data-app-start-mode="active" data-page-start-mode="disabled">Back</a>
                </div> <!-- end of toolbar -->

                <div>
                	<ul class="rounded arrow" id="groups">
                        <li class="forward" id="groupData"><a id="name" href="#"></a><small class="counter"><a href="#" id="title"></a></small></li>
                        <li class="forward" id="info" class="Disabled"><a id="description"><small class="counter"><a id="creator"></small></a>
                        </a></li>
                    </ul>
                </div>


                <div id="notfound" class="Disabled">
                    <ul class="rounded" >
                        <ul class="arrow">
                            <li><h1 style="color:#FFFFFF;" id="NotFoundText">Group not found</h1></li>
                        </ul>
                    </ul>            
                </div>
			</div>
		</div>

		<script src="js/jquery.min.js"></script>
        <script src="http://cdn.illution.dk/JS/jquery.hashchange.min.js"></script>
        <script src="http://cdn.beaconpush.com/clients/client-1.js"></script>
        <script src="js/clickthis.js"></script><script src="js/script.js"></script>
        <script src="js/ajaxQueue.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $(document).hashchange();
            }); 
            $(document).hashchange(function(){
                var Id = 1;
                if(location.hash != null && location.hash != ""){
                    var hash = location.hash;
                    hash = hash.replace("#","");
                    hash = parseInt(hash);
                    if(typeof hash == "number"){
                        Id = hash;
                    }
                }
                    $.ajax({
                      url: "http://illution.dk/ClickThis/api/group/"+Id,
                      success: function(data){
                        $("#notfound").removeClass("Active").addClass("Disabled");
                        $("#name").html(data.Name);
                        $("#description").html(data.Description);
                        $("#title").html(data.Title);
                        $("#info").addClass("Disabled");
                        getCreator(data.Creator);
                      },
                      error: function(){
                      	$("#info").addClass("Disabled");
                      	$("#NotFoundText").html("Group not found");
                        $("#notfound").removeClass("Disabled").addClass("Active");
                      }
                    });
            });         	
            function getCreator(Id){
            	$.ajax({
                      url: "http://illution.dk/ClickThis/api/user/"+Id,
                      success: function(data){
                        $("#notfound").removeClass("Active").addClass("Disabled");
                 		$("#creator").html(data.Name);
                      },
                    });
            }
            $("#groupData").click(function(){
            	$("#info").toggleClass("Disabled");
            });
        </script>
	</body>
</html>